<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="photoboardMapper">
<!-- 게시물 업로드 -->

<!-- 이미지 출력 -->
<select id="loadPosts" resultType="com.doggle.vo.PhotoboardVO">
    SELECT photoboard.b_no, photoboard.p_no, photoboard.user_id, photoboard.pb_title, photoboard.pb_content, photoboard.regdate, photoboard.pb_photo, photoboard.viewcnt, photoboard.recommend, photoboard.reportcnt, photoboard.use_flag, member.pic, member.nickname 
    FROM photoboard, member where photoboard.user_id = member.user_id and photoboard.use_flag = 0 order by photoboard.p_no desc
</select>
<insert id="uploadPost">
	INSERT INTO photoboard (p_no, user_id, pb_title, pb_content, pb_photo)
	VALUES (D_P_NO_SEQ.NEXTVAL, #{user_id}, #{pb_title}, #{pb_content}, #{pb_photo}) 
</insert>
<update id="updateRecommend">
UPDATE PHOTOBOARD 
SET
recommend = #{recommend}
WHERE
p_no = #{p_no} 
</update>
<update id="updateReport">
UPDATE PHOTOBOARD 
SET
reportcnt = #{reportcnt}
WHERE
p_no = #{p_no} 
</update>
<update id="deletePost">
UPDATE PHOTOBOARD 
SET
use_flag = 1
WHERE
p_no = #{p_no}
</update>
<select id="loadViewCount" resultType="Int">
	select VIEWCNT from PHOTOBOARD where p_no = #{p_no}
</select>
<update id="increaseViewCount">
UPDATE PHOTOBOARD
SET
VIEWCNT = VIEWCNT + 1
WHERE
p_no = #{p_no}
</update>


</mapper>